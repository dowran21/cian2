(this.webpackJsonpgamysh=this.webpackJsonpgamysh||[]).push([[18],{104:function(e,t,a){var n=a(79).GenIcon;e.exports.IoMdAdd=function(e){return n({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"}}]})(e)}},107:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(27);var r=a(19);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(r.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1170:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(107),c=a(9),i=a(0),l=a(87),o=a(96),s=a(220),u=a(13),d=a(82),f=a(14),p=a(2);var b=function(e){var t=e.visible,a=e.setUploadedImage,n=e.form,r=e.main_id,c=e.setDeletedImage,i=e.values,l=e.token,b=e.setCloseModal,m=Object(u.b)();return Object(p.jsx)(o.a,{size:"md",visible:t,setCloseModal:function(){return b()},title:"delete_image"===n?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",children:"delete_image"===n?Object(p.jsxs)("div",{className:"flex flex-col",children:[Object(p.jsx)("img",{src:"".concat("https://gamysh.com","/").concat(i.destination)}),Object(p.jsxs)("div",{className:"flex flex-row",children:[Object(p.jsx)("button",{onClick:function(){return b()},className:"w-1/2 rounded-l text-center py-3 bg-green-400 text-white focus:outline-none",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(p.jsx)("button",{onClick:function(){m(Object(d.b)({url:"api/admin/delete-place-image/".concat(i.id),token:l,action:function(e){e.success?c(i.id):(f.b.error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430"),b())}}))},className:"w-1/2 rounded-r text-center py-3 bg-red-400 text-white focus:outline-none",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}):Object(p.jsx)(s.a,{visible:!0,myDocument:{id:1},token:l,setUploadedImage:a,url:"api/admin/add-page-image/".concat(r)})})},m=a(86),h=a(104),x=a(16),v=a(131);function j(e,t){switch(console.log(t),t.type){case"SET_MODAL_VISIBLE":return Object(c.a)(Object(c.a)({},e),{},{visible:!1});case"SET_VISIBLE_FORM":return Object(c.a)(Object(c.a)({},e),{},{visible:!0,form:"add"});case"SET_DATA":return Object(c.a)(Object(c.a)({},e),{},{data:t.payload,loading:!1});case"ADD_IMAGE":return Object(c.a)(Object(c.a)({},e),{},{data:[].concat(Object(r.a)(e.data),[{id:t.payload.image_id,destination:t.payload.destination}]),visible:!1});case"DELETE_IMAGE_FORM":return Object(c.a)(Object(c.a)({},e),{},{form:"delete_image",visible:!0,values:t.payload});case"DELETE_IMAGE":return Object(c.a)(Object(c.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload})),visible:!1});case"SET_MAIN":return Object(c.a)(Object(c.a)({},e),{},{main_id:t.payload,trigger:!e.trigger,loading:!0});case"SET_PAGES":return Object(c.a)(Object(c.a)({},e),{},{pages:t.payload});default:return e}}var g=function(e){var t=e.handleClick;return Object(p.jsx)("div",{className:"flex flex-row justify-between items-center",children:Object(p.jsx)(m.a,{tooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",handleClick:t,icon:Object(p.jsx)(h.IoMdAdd,{className:"text-2xl "})})})};t.default=function(){var e,t,a=Object(i.useReducer)(j,{visible:!1,places:[],images:[],form:"",values:"",data:[],loading:!0,main_id:1,trigger:!1,pages:[]}),r=Object(n.a)(a,2),c=r[0],o=r[1],s=Object(u.b)(),h=Object(u.c)((function(e){return e.auth.token}));return Object(i.useEffect)((function(){s(Object(d.a)({url:"api/admin/page-image-places",token:h,action:function(e){e.success?o({type:"SET_PAGES",payload:e.data.rows}):f.b.error("\u041d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u0430")}}))}),[]),Object(i.useEffect)((function(){s(Object(d.a)({url:"api/admin/get-page-images/".concat(c.main_id),token:h,action:function(e){e.success?(console.log(e.data),o({type:"SET_DATA",payload:e.data.rows})):(f.b.error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0430\u043d\u044f \u043e\u0448\u0438\u0431\u043a\u0430"),o({type:"SET_LOADING",payload:!1}))}}))}),[c.trigger]),Object(p.jsx)(p.Fragment,{children:c.loading?Object(p.jsx)(x.a,{loading:c.loading}):Object(p.jsxs)(l.a,{header:Object(p.jsx)(g,{handleClick:function(){return o({type:"SET_VISIBLE_FORM",payload:""})}}),children:[Object(p.jsx)(b,{visible:c.visible,main_id:c.main_id,form:c.form,token:h,values:c.values,setUploadedImage:function(e){return o({type:"ADD_IMAGE",payload:e})},setCloseModal:function(){return o({type:"SET_MODAL_VISIBLE",payload:""})},setDeletedImage:function(e){return o({type:"DELETE_IMAGE",payload:e})}}),Object(p.jsx)("div",{className:"flex flex-row justify-start items-start bg-blue-50 w-full h-12 overflow-x-auto",children:(null===(e=c.pages)||void 0===e?void 0:e.length)>0&&c.pages.map((function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{onClick:function(){return o({type:"SET_MAIN",payload:e.id})},className:"".concat(c.main_id===e.id?"bg-white":""," flex justify-center items-center min-w-200 whitespace-nowrap px-3 h-full rounded-t-lg focus:outline-none"),children:e.place.slice(0,30)})})}))}),Object(p.jsx)("div",{className:"w-full h-full px-6 overflow-y-auto",children:Object(p.jsx)("div",{className:"grid grid-cols-3 gap-8 py-10",children:null===(t=c.data)||void 0===t?void 0:t.map((function(e){return Object(p.jsxs)("div",{className:"flex flex-row relative justify-center items-center",children:[Object(p.jsx)("div",{className:"absolute right-0 top-0 rounded-full",children:Object(p.jsx)(m.a,{tooltip:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",handleClick:function(){return o({type:"DELETE_IMAGE_FORM",payload:e})},icon:Object(p.jsx)(v.BiTrash,{className:"text-2xl "})})}),Object(p.jsx)("img",{className:"fill p-2 object-container",src:"".concat("https://gamysh.com","/").concat(e.destination)})]})}))})})]})})}},130:function(e,t,a){var n=a(79).GenIcon;e.exports.MdDeleteForever=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}},131:function(e,t,a){var n=a(79).GenIcon;e.exports.BiTrash=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M17.004 20L17.003 8h-1-8-1v12H17.004zM13.003 10h2v8h-2V10zM9.003 10h2v8h-2V10zM9.003 4H15.003V6H9.003z"}},{tag:"path",attr:{d:"M5.003,20c0,1.103,0.897,2,2,2h10c1.103,0,2-0.897,2-2V8h2V6h-3h-1V4c0-1.103-0.897-2-2-2h-6c-1.103,0-2,0.897-2,2v2h-1h-3 v2h2V20z M9.003,4h6v2h-6V4z M8.003,8h8h1l0.001,12H7.003V8H8.003z"}},{tag:"path",attr:{d:"M9.003 10H11.003V18H9.003zM13.003 10H15.003V18H13.003z"}}]})(e)}},204:function(e,t,a){var n=a(79).GenIcon;e.exports.RiInboxUnarchiveLine=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M20 3l2 4v13a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.004L4 3h16zm0 6H4v10h16V9zm-8 1l4 4h-3v4h-2v-4H8l4-4zm6.764-5H5.236l-.999 2h15.527l-1-2z"}}]}]})(e)}},205:function(e,t,a){var n=a(79).GenIcon;e.exports.MdDone=function(e){return n({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(e)}},220:function(e,t,a){"use strict";var n=a(107),r=a(3),c=a.n(r),i=a(10),l=a(12),o=a(0),s=a(30),u=a(14);function d(e){var t={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/vnd.ms-excel":".xlsx",".csv":".xlsx",csv:".xlsx","application/pdf":".pdf",".pdf":".pdf",pdf:".pdf","image/png":".png","image/jpeg":".jpeg","image/jpg":".jpg"};return t[e]?t[e]:""}var f=function(){var e=Object(i.a)(c.a.mark((function e(t,a){var n,r,i,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t){e.next=2;break}return e.abrupt("return",!1);case 2:for(n=atob(t.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return l=new Blob([new Uint8Array(r)],{type:a}),c=l,s="IMAGE-"+Date.now(),c.lastModifiedDate=new Date,c.name=s,o=c,e.abrupt("return",new File([o],o.name+d(l.type),{type:l.type}));case 8:case"end":return e.stop()}var c,s}),e)})));return function(t,a){return e.apply(this,arguments)}}(),p=f,b=a(130),m=a(205),h=a(204),x=a(2);function v(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"n/a";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return 0===a?"".concat(e," ").concat(t[a],")"):"".concat((e/Math.pow(1024,a)).toFixed(1)," ").concat(t[a])}t.a=function(e){var t=e.myDocument,a=e.token,r=e.url,d=e.visible,f=e.setUploadedImage,j=Object(o.useRef)(),g=Object(o.useState)([]),O=Object(l.a)(g,2),y=O[0],w=O[1],M=Object(o.useState)(0),E=Object(l.a)(M,2),N=E[0],_=E[1],k=Object(o.useState)(0),I=Object(l.a)(k,2),z=I[0],A=I[1],D=Object(o.useState)([]),T=Object(l.a)(D,2),S=T[0],C=T[1],L=Object(o.useState)(!1),V=Object(l.a)(L,2),H=V[0],R=V[1],B=function(){var e=Object(i.a)(c.a.mark((function e(){var n,i,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new FormData,i=0;case 2:if(!(i<y.length)){e.next=10;break}return e.next=5,p(y[i].file,y[i].type);case 5:l=e.sent,n.append("picture",l);case 7:i++,e.next=2;break;case 10:o={onUploadProgress:function(e){_(Math.round(100*e.loaded/e.total))},headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}},s.b.post(r,n,o).then((function(e){e&&(e.data.rows&&f({id:t.id,destination:e.data.rows.destination,image_id:e.data.rows.id}),R(!0),w([]),A(0))})).catch((function(e){w([]),A(0),R(!1),_(0),C([]),console.log(e)}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){0!==y.length&&0!==z&&!0===d&&y.length===z&&B();var e=j;return function(){!1===d&&(w([]),A(0),R(!1),_(0),C([]),e.current&&(e.current.value=""))}}),[y,d]),Object(x.jsx)("div",{className:"flex flex-col justify-between w-full",children:Object(x.jsxs)("div",{className:"bg-white w-full shadow  border border-opacity-10 flex flex-col sm:flex-row justify-start items-center relative rounded-lg overflow-hidden py-2 sm:py-0",children:[t.destination?Object(x.jsx)("img",{src:"".concat("https://gamysh.com","/").concat(null===t||void 0===t?void 0:t.destination),className:"object-contain rounded-lg w-48 sm:w-28 sm:h-28",alt:"CTYPE"}):null,Object(x.jsxs)("div",{className:"flex flex-col justify-between py-1 items-center w-full h-20 sm:h-28",children:[Object(x.jsx)("div",{className:"relative flex flex-col h-full justify-between items-center w-full pt-2 sm:pt-5",children:Object(x.jsxs)("label",{htmlFor:"doc-".concat(t.id),className:" cursor-pointer active:bg-gray-50 flex flex-row justify-center items-center border-2 px-2 py-1 rounded-lg text-blue-500 border-blue-500 border-dashed w-30",children:[Object(x.jsx)(h.RiInboxUnarchiveLine,{className:"text-xl mr-2"}),Object(x.jsx)("p",{className:"font-medium text-sm flex flex-col items-center justify-center",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(x.jsx)("input",{ref:j,id:"doc-".concat(t.id),type:"file",onChange:function(e){e.preventDefault();var t=Object.values(e.target.files);(function(e,t){return!(t.length+y.length>1)||(e.target.files=null,e.target.value="",u.b.error("".concat(1," suratdan artykma\xe7 \xfd\xfckl\xe4p bolanok!")),!1)})(e,t)&&function(e,t){for(var a="",n=0;n<t.length;n++)t[n].size>10482944&&(a+=t[n].name+" g\xf6wrimi i\u0148 k\xf6p ".concat(v(10482944)," bolmaly!\n"));return""===a||(e.target.files=null,e.target.value="",u.b.error(a),!1)}(e,t)&&(A(t.length),t.forEach((function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){w((function(a){return[].concat(Object(n.a)(a),[{file:t.target.result,type:e.type}])})),C((function(t){return[].concat(Object(n.a)(t),[e.name])}))}})))},multiple:t.multiple,accept:t.mimetype_web,required:t.required,hidden:!0})]})}),Object(x.jsx)("div",{className:"w-full px-2 sm:mb-2",children:Object(x.jsxs)("div",{className:"relative flex flex-row justify-center items-center w-full pt-1",children:[Object(x.jsxs)("div",{className:"px-2 w-full",children:[Object(x.jsx)("div",{className:"text-xs font-light text-blue-600 w-full",children:S.join(", ")}),Object(x.jsx)("div",{className:"overflow-hidden w-full h-2 text-xs flex rounded bg-gray-300",children:Object(x.jsx)("div",{style:{width:"".concat(N,"%")},className:"".concat(!0===H&&100===N?"bg-green-400":"bg-blue-500 "," shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transform ease-in-out duration-200")})})]}),Object(x.jsxs)("div",{className:"relative flex flex-row justify-end items-center w-14 text-base -mt-2",children:[Object(x.jsx)(m.MdDone,{className:"".concat(!0===H&&100===N?"opacity-100":"opacity-0"," absolute top-0 -left-2 text-3xl text-green-500 mr-1 transform ease-in-out duration-500")}),Object(x.jsx)("div",{className:"".concat(!0!==H&&100!==N?"opacity-100":"opacity-0"," absolute top-0 -left-1   transform ease-in-out duration-500 font-medium text-blue-500 whitespace-nowrap"),children:"".concat(N," %")}),Object(x.jsx)(b.MdDeleteForever,{onClick:function(){_(0),R({id:t.id,success:!1}),C([]),w([]),j.current&&(j.current.value="")},className:"text-2xl text-gray-400 -mr-1 cursor-pointer z-30 hover:text-red-300 active:text-red-400"})]})]})})]})]})})}},82:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a(3),r=a.n(n),c=a(10),i=a(30),l=(a(14),function(e){var t=e.url,a=e.token,n=e.action;return Object(c.a)(r.a.mark((function e(){var c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.get({url:t,token:a,withCredentials:!1});case 3:return c=e.sent,e.abrupt("return",n({success:!0,data:c.data}));case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",n({success:!1,message:null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.data}));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))}),o=function(e){var t=e.url,a=e.token,n=e.action,l=e.data;return function(){var e=Object(c.a)(r.a.mark((function e(c){var o,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post({url:t,params:l,withCredentials:!1,token:a});case 3:return o=e.sent,e.abrupt("return",n({success:!0,data:o.data}));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",n({success:!1,message:null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data,error:null===e.t0||void 0===e.t0?void 0:e.t0.response}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},86:function(e,t,a){"use strict";var n=a(118),r=a.n(n),c=a(119),i=a.n(c),l=a(0),o=a(2);t.a=function(e){var t=e.icon,a=e.handleClick,n=e.tooltip,c=Object(l.useRef)();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("button",{type:"button",ref:c,ripple:"light",onClick:a,className:"flex justify-center items-center w-10 h-10 mx-2 hover:text-white hover:bg-indigo-600 active:bg-white active:text-indigo-600 rounded-md focus:outline-none shadow-lg text-indigo-600 bg-white",children:t}),Object(o.jsx)(r.a,{placement:"top",ref:c,children:Object(o.jsx)(i.a,{children:n})})]})}},87:function(e,t,a){"use strict";var n=a(2);t.a=function(e){var t=e.children,a=e.header,r=e.footer;return Object(n.jsxs)("div",{className:"flex flex-col justify-between relative w-full h-full px-1 sm:px-4 py-2 overflow-y-hidden",children:[Object(n.jsx)("div",{className:"w-full",children:a}),Object(n.jsx)("div",{className:"relative w-full h-full shadow-lg rounded-2xl overflow-hidden bg-white max-h-87 2xl:max-h-90 4xl:max-h-90",children:t}),Object(n.jsx)("div",{className:"w-full",children:r})]})}},96:function(e,t,a){"use strict";var n=a(97),r=a.n(n),c=a(98),i=a.n(c),l=a(99),o=a.n(l),s=a(2);t.a=function(e){var t=e.visible,a=e.setCloseModal,n=e.size,c=e.title,l=e.children;return Object(s.jsxs)(r.a,{size:n,active:t,toggler:a,children:[Object(s.jsx)(i.a,{toggler:a,children:Object(s.jsx)("span",{className:"text-base md:text-xl",children:c})}),Object(s.jsx)(o.a,{children:l})]})}},97:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=c(a(0)),r=c(a(29));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,a=e.children,r=e.size,c=e.active,i=e.toggler;return t="sm"===r?"max-w-sm":"lg"===r?"max-w-6xl":"max-w-3xl",n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"".concat(c?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"," grid place-items-center overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none transition-all duration-500"),onClick:i},n.default.createElement("div",{className:"transform ".concat(c?"opacity-100 translate-y-0":"opacity-0 -translate-y-10"," w-auto my-6 mx-auto ").concat(t," transition-all duration-500")},n.default.createElement("div",{className:"border-0 p-6 ".concat("lg"===r?"rounded-xl shadow-xl":"rounded-lg shadow-lg"," flex flex-col w-full bg-white outline-none focus:outline-none"),onClick:function(e){return e.stopPropagation()}},a))),n.default.createElement("div",{className:"".concat(c?"opacity-25 pointer-events-auto":"opacity-0 pointer-events-none"," fixed inset-0 z-40 bg-black transition-all duration-500")}))}i.defaultProps={size:"regular"},i.propTypes={children:r.default.node.isRequired,size:r.default.string.isRequired,active:r.default.bool.isRequired,toggler:r.default.func.isRequired}},98:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=c(a(0)),r=c(a(29));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,a=e.toggler;return n.default.createElement("div",{className:"flex items-center justify-between mb-6"},n.default.createElement("h5",{className:"text-gray-900 text-2xl font-bold mt-0 mb-0"},t),n.default.createElement("button",{className:"p-1 bg-transparent absolute top-2 right-4 text-gray-900 text-3xl leading-none outline-none focus:outline-none",onClick:a},n.default.createElement("span",{className:"text-gray-900 text-3xl block"},"\xd7")))}i.propTypes={children:r.default.node.isRequired,toggler:r.default.func.isRequired}},99:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=c(a(0)),r=c(a(29));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children;return n.default.createElement("div",{className:"relative flex-auto mb-6"},t)}i.propTypes={children:r.default.node.isRequired}}}]);
//# sourceMappingURL=18.793de678.chunk.js.map