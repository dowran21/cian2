{"version":3,"sources":["components/Pagination.js","../node_modules/@react-icons/all-files/go/GoSearch.js","components/useTimeOut.js","components/SearchInput.js","pages/Logs/index.js"],"names":["MyPagination","limit","setLimit","setPage","count","page","className","pageSize","current","total","showTotal","range","onChange","value","e","target","GenIcon","require","module","exports","GoSearch","props","useTimeout","action","time","useState","timeOut","setTime","clearTimeout","setTimeout","SearchInput","placeholder","handleSearch","useTimeOut","type","name","id","reducer","state","console","log","payload","data","logs","loading","trigger","search","start_date","end_date","Header","hanldeStartDate","hanldeEndDate","onFocus","currentTarget","onBlur","Logs","dispatch","useDispatch","useReducer","sort_column","sort_direction","setState","token","useSelector","auth","useEffect","get","url","response","success","rows","toast","error","header","footer","length","map","item","real_estate_id","full_name","phone","activation","comment","log_id","colSpan","title"],"mappings":"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","file":"static/js/23.8d71df21.chunk.js","sourcesContent":["import Pagination from 'rc-pagination';\n\nconst MyPagination = ({limit, setLimit, setPage, count, page}) =>{\n    return (\n        <div className=\"relative flex flex-row w-full justify-between px-2\">\n            <div></div>\n            <Pagination\n                pageSize={limit}\n                current={page + 1}\n                // hideOnSinglePage\n                className=\"\" \n                total={count} \n                showTotal={(total, range) =>\n                    <div className=\"hidden md:flex absolute top-0 left-2\">{`${range[0]} - ${range[1]} из ${total}`}</div>\n                }\n                onChange={(page) => setPage(page - 1)}\n                \n            />\n            <select className=\"focus:outline-none p-1\" value={limit} onChange={(e) => setLimit(e.target.value)}> \n                <option value={10}>\n                    10\n                </option>\n                <option value={20}>\n                    20\n                </option>\n                <option value={30}>\n                    30\n                </option>\n                <option value={40}>\n                    40\n                </option>\n                <option value={50}>\n                    50\n                </option>\n            </select>\n        </div>\n    );\n};\n\nexport default MyPagination;\n\n","// THIS FILE IS AUTO GENERATED\nvar GenIcon = require('../lib').GenIcon\nmodule.exports.GoSearch = function GoSearch (props) {\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"viewBox\":\"0 0 16 16\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"fillRule\":\"evenodd\",\"d\":\"M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z\"}}]})(props);\n};\n","import {useState} from 'react';\n \nfunction useTimeout({action, time}){\n    const [timeOut, setTime] = useState(0);\n    function handleChange(value){\n        if(timeOut) clearTimeout(timeOut);\n        setTime(\n            setTimeout(() => {action(value)}, time)\n        );\n    }\n    return handleChange;\n}\n \nexport default useTimeout;","import { func, string } from 'prop-types';\nimport useTimeOut from './useTimeOut';\nimport {GoSearch} from \"@react-icons/all-files/go/GoSearch\";\n\n\n \nfunction SearchInput({placeholder, action}){\n    const handleSearch = useTimeOut({time:1500, action:(value) => action(value)});\n    return(\n        <div className=\"relative w-full\">\n            <div className=\"absolute top-1 left-2 inset-y-0 flex items-center pl-1\">\n                <GoSearch className=\"text-xl text-indigo-600\" aria-hidden=\"true\" />\n            </div>\n            <input\n                className=\"pr-4 pl-10 h-10 text-gray-700 rounded-2xl appearance-none w-full bg-white shadow-sm placeholder-gray-400 focus:shadow-inner text-sm focus:outline-none\"\n                onChange={(e) =>handleSearch(e.target.value)} \n                type=\"search\" name=\"search\" id=\"search\" placeholder={placeholder}\n            />\n        </div>\n    );\n};\n \nSearchInput.propTypes = {\n    placeholder:string.isRequired,\n    action:func.isRequired\n}\n \nexport default SearchInput;","import { useEffect, useReducer } from 'react';\nimport {useDispatch, useSelector} from 'react-redux'\nimport { get } from '../../application/middlewares';\nimport Table from '../../components/Table/Table';\nimport Head from '../../components/Table/Head';\nimport Body from '../../components/Table/Body';\nimport Row from '../../components/Table/Row';\nimport Cell from '../../components/Table/Cell';\nimport NoContent from '../../components/NoContent';\nimport toast from 'react-hot-toast';\nimport BgLoader from '../../components/BgLoader';\nimport Layout from \"../../components/Layout\";\nimport SearchInput from '../../components/SearchInput';\nimport MyPagination from '../../components/Pagination';\n\n\nfunction reducer(state, action) {\n    console.log(action)\n    switch (action.type){\n        case \"SET_DATA\":{\n            return {    \n                ...state,\n                count:+action.payload?.count,\n                data:action.payload?.logs,\n                loading:false,\n            }\n        }\n        case \"SET_SEARCH\":{\n            return {\n                ...state,\n                trigger:!state.trigger,\n                page:0,\n                search:action.payload,\n                loading:true\n            }\n        }\n        case \"SET_PAGE\":{\n            return{\n                ...state,\n                trigger:!state.trigger,\n                page:action.payload,\n                loading:true\n            }\n        }\n        case \"SET_START_DATE\":{\n            return{\n                ...state, \n                trigger:!state.trigger,\n                page:0,\n                start_date:action.payload,\n                loading:true\n            }\n        }\n        case \"SET_END_DATE\":{\n            return {\n                ...state,\n                trigger:!state.trigger,\n                page:0,\n                end_date:action.payload,\n                loading:true\n            }\n\n        }\n        case \"SET_LIMIT\":{\n            return{\n                ...state,\n                trigger:!state.trigger,\n                page:0,\n                loading:true,\n                limit:action.payload\n            }\n        }\n        default: return state\n    }\n}\n\n\nfunction Logs (){\n    const dispatch = useDispatch()\n    const [state, setState] = useReducer(reducer, { \n        data:[], loading:true, search:\"\", trigger:false, count:0,\n        sort_column:\"id\", sort_direction:\"ASC\", page:0, limit: 30,\n        start_date:\"\",end_date:\"\"\n    });\n    const token = useSelector(state => state.auth.token);\n    useEffect(() => {\n        dispatch(get({\n            url: `api/admin/get-logs?page=${state.page}&limit=${state.limit}&search=${state.search}&start_date=${state.start_date}&end_date=${state.end_date}`,\n            token,\n            action:(response) =>{\n                console.log(response)\n                if(response.success){\n                    setState({type:\"SET_DATA\", payload:{...response.data.rows}});\n                    console.log(state)\n                }else{\n                    toast.error(\"Неизвестная ошибка\")\n                }\n            }\n        }))\n    }, [state.page, state.trigger])\n\n    const handleSearch = (value) =>{\n        setState({type:\"SET_SEARCH\", payload:value})\n    }\n    \n\n    return (\n        <Layout header = {<Header handleSearch = {handleSearch} hanldeStartDate = {(value) => setState({type:\"SET_START_DATE\", payload:value})} hanldeEndDate = {(value) => setState({type:\"SET_END_DATE\", payload:value})}/>} footer = {<MyPagination setPage = {(value) => setState({type:\"SET_PAGE\", payload:value})} setLimit = {(value) => setState({type:\"SET_LIMIT\", payload:value})} limit = {+state.limit} count = {+state.count} page = {+state.page}/>}>\n            \n            <BgLoader loading = {state.loading}/>\n            <div className=\"w-full h-full px-6 overflow-y-auto pb-5\">\n                <Table>\n                    <Head>\n                        <Row>\n                            <>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>ID</span>\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>Оператор</span>\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>Номер</span>\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>Время активации</span>\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>Активация</span>\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div className={` 'text-blue-500'  px-2 py-4 font-medium flex flex-row justify-start items-center cursor-pointer`}>\n                                    <span>Комментари</span>\n                                </div>\n                            </Cell>\n                            </>\n                        </Row>\n                    </Head>\n                        <Body>\n                        {state.data?.length>0 ?\n                            state.data.map(item =>(\n                                <Row key = {item.log_id}>\n                                    <>\n                                    <Cell>\n                                        <div className = \"p-2 w-12\">\n                                            {item.real_estate_id}\n                                        </div>\n                                    </Cell>\n                                    <Cell>\n                                        <div className = \"p-2\">\n                                            {item.full_name}\n                                        </div>\n                                    </Cell>\n                                    <Cell>\n                                        <div className = \"p-2\">\n                                            {item.phone}\n                                        </div>\n                                    </Cell>\n                                    <Cell>\n                                        <div className = \"p-2\">\n                                            {item.time}\n                                        </div>\n                                    </Cell>\n                                    <Cell>\n                                        <div className = \"p-2\">\n                                            {item.activation ? \"Подтвердили\" : \"Отказали\"}\n                                        </div>\n                                    </Cell>\n                                    <Cell>\n                                        <div className = \"p-2\">\n                                            {item.comment ? `${item.comment}` : \"Нет комментария\"}\n                                        </div>\n                                    </Cell>\n                                    </>\n                                </Row>\n                            ))\n                            :\n                            \n                            state.loading === true ? null :\n                                <tr>\n                                    <td colSpan=\"10\" >\n                                        <div className=\"flex w-full h-full py-20 justify-center items-center\">\n                                            <NoContent title=\"Нет Локаций\"/>\n                                        </div>\n                                    </td>\n                                </tr>\n                            }\n                        </Body>\n                </Table>\n            </div>\n        </Layout>\n    )\n}\n\n\nconst Header = ({handleSearch, hanldeStartDate, hanldeEndDate}) =>{\n    return (\n    <div className=\"flex flex-row justify-between items-center\">\n        <div className=\"flex flex-row w-4/5\">\n            <div className = \"w-1/3\"> \n                <SearchInput action={(value) => handleSearch(value)} placeholder=\"Поиск\"/>\n            </div>\n            <div className = \"pl-3 w-1/3\">\n                <input type = \"text\" onFocus = {(e)=>{e.currentTarget.type=\"date\"}} onBlur={(e)=>e.currentTarget.type=\"text\"} onChange = {(e)=>hanldeStartDate(e.target.value)} placeholder = \"Введите начальное число\" className = \"w-1/3 pr-4 pl-15 h-10 text-gray-700 rounded-2xl appearance-none w-full bg-white shadow-sm placeholder-gray-400 focus:shadow-inner text-sm focus:outline-none pl-10\"/>\n            </div>\n            <div className = \"pl-3 w-1/3\">\n                <input type = \"text\" onFocus = {(e)=>{e.currentTarget.type=\"date\"}} onBlur={(e)=>e.currentTarget.type=\"text\"} onChange = {(e)=>hanldeEndDate(e.target.value)} placeholder = \"Введите конечное число\" className = \"w-1/3 pr-4 pl-15 h-10 text-gray-700 rounded-2xl appearance-none w-full bg-white shadow-sm placeholder-gray-400 focus:shadow-inner text-sm focus:outline-none pl-10\"/>\n            </div>\n        </div>\n    </div>\n    )\n};\n\n\nexport default Logs"],"sourceRoot":""}